## SpotifyFreeAPI.ahk

### How?
Using the spotify token that's generated by discord when you link your accounts, for some reason it has access to the player API endpoints, even for non-premium accounts.

This library uses a headless edge browser to access the token through discord, On the first run, it will ask you to login to a discord account. after that, and as long as you don't delete the `spotifyEdgeProfile` folder, it should just work.

### Usage

#### Note: I highly recommend that you don't use your main discord and spotify accounts with this, as it obviously compromises their security.

1. You need to clone this repo with **ALL** of its submodules
    ```powershell
    git clone --recurse-submodules https://github.com/SaifAqqad/SpotifyFreeAPI.ahk.git
    ```
    or just use the [single-file release](https://github.com/SaifAqqad/SpotifyFreeAPI.ahk/releases/latest)

2. Include the SpotifyFreeAPI.ahk file in your script
    
    ```ahk
    #Include, SpotifyFreeAPI.ahk

    ; or if the SpotifyFreeAPI.ahk is in your script's lib folder:
    #Include, <SpotifyFreeAPI> 
    ; and in this case, make sure the library's lib folder is inside your script's lib folder
    ```
3. Create a new instance of the `SpotifyAPI` class
    ```ahk
    global spotify := new SpotifyAPI("your_spotify_username")
    ; you can omit the username but you'll need to play
    ; something on spotify for the library to retrieve the token
    global spotify := new SpotifyAPI()
    ```
4. Control spotify
    ```ahk
    spotify.ResumePlayback()
    spotify.SetVolume(85)

    ; or define hotkeys
    <^Right::spotify.NextTrack()
    <^Left::spotify.PreviousTrack()
    ```
